{"ast":null,"code":"var _jsxFileName = \"C:\\\\Orgo\\\\frontend\\\\src\\\\pages\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport styled from \"styled-components\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport axios from \"axios\";\nimport { loginRoute } from '../utilis/APIRoutes';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const navigate = useNavigate();\n  const [values, setValues] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const toastOptions = {\n    position: \"top-right\",\n    pauseOnHover: \"true\",\n    draggable: \"true\",\n    theme: \"light\"\n  };\n  useEffect(() => {\n    if (localStorage.getItem(\"chat-app-user\")) {\n      navigate(\"/\");\n    }\n  }, []);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (handleValidation()) {\n      const {\n        username,\n        password\n      } = values;\n      console.log(\"values\", values);\n      console.log(\"in validation\", loginRoute);\n      try {\n        const {\n          data\n        } = await axios.post(loginRoute, {\n          username,\n          password\n        });\n        if (data.status === 400) {\n          toast.error(data.msg, toastOptions);\n        }\n        if (data.status === 200) {\n          // console.log(\"inside this condition\")\n          localStorage.setItem(\"chat-app-user\", JSON.stringify(data.data));\n          const user = await JSON.parse(localStorage.getItem(\"chat-app-user\"));\n          if (user.role === \"user\") {\n            navigate(\"/\");\n          } else if (user.role === \"admin\") {\n            navigate(\"/admin-panel\");\n          }\n        }\n        console.log(\"data\", data);\n      } catch (error) {\n        toast.error(\"An error occurred. Please try again.\", toastOptions);\n        console.log(\"error\", error);\n      }\n    }\n  };\n  const handleValidation = () => {\n    const {\n      username,\n      password\n    } = values;\n    if (password === \"\") {\n      toast.error(\"Password is required\", toastOptions);\n      return false;\n    } else if (username.length === \"\") {\n      toast.error(\"Username is required\", toastOptions);\n      return false;\n    }\n    return true;\n  };\n  const handleChange = event => {\n    setValues({\n      ...values,\n      [event.target.name]: event.target.value\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto flex min-h-screen w-full items-center justify-center bg-gray-900 text-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex w-[30rem] flex-col space-y-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-4xl font-medium\",\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"flex flex-col gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Username\",\n              name: \"username\",\n              onChange: handleChange,\n              className: \"w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Password\",\n              name: \"password\",\n              onChange: handleChange,\n              className: \"w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"transform rounded-sm bg-indigo-600 py-2 font-bold duration-300 hover:bg-indigo-400\",\n            children: \"LOG IN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true);\n}\n_s(Login, \"d+xOavmo60L3lgr1mtssNf2rXCY=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","styled","ToastContainer","toast","axios","loginRoute","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","navigate","values","setValues","username","password","toastOptions","position","pauseOnHover","draggable","theme","localStorage","getItem","handleSubmit","event","preventDefault","handleValidation","console","log","data","post","status","error","msg","setItem","JSON","stringify","user","parse","role","length","handleChange","target","name","value","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","_c","$RefreshReg$"],"sources":["C:/Orgo/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport styled from \"styled-components\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport axios from \"axios\";\r\nimport { loginRoute } from '../utilis/APIRoutes';\r\n\r\nfunction Login() {\r\n\r\n    const navigate = useNavigate()\r\n    const [values, setValues] = useState({\r\n      username:\"\",\r\n      password:\"\", \r\n    })\r\n\r\n    const toastOptions = {\r\n      position:\"top-right\",\r\n      pauseOnHover:\"true\",\r\n      draggable: \"true\",\r\n      theme:\"light\"\r\n    }\r\n\r\n    useEffect(() =>{\r\n      if(localStorage.getItem(\"chat-app-user\")){\r\n        navigate(\"/\")\r\n      }\r\n    },[])\r\n    const handleSubmit = async(event) => {\r\n      event.preventDefault();\r\n      if(handleValidation()){\r\n        const {username, password} = values\r\n        console.log(\"values\", values);\r\n        console.log(\"in validation\", loginRoute);\r\n        try {\r\n          const {data} = await axios.post(loginRoute,{\r\n            username,\r\n            password\r\n          })\r\n          if(data.status === 400){\r\n            toast.error(data.msg, toastOptions)\r\n          }\r\n          if(data.status === 200){\r\n            // console.log(\"inside this condition\")\r\n            localStorage.setItem(\"chat-app-user\", JSON.stringify(data.data))\r\n            const user = await JSON.parse(localStorage.getItem(\"chat-app-user\"));\r\n            if(user.role===\"user\"){\r\n              navigate(\"/\")\r\n            }else if(user.role===\"admin\"){\r\n              navigate(\"/admin-panel\")\r\n            }\r\n            \r\n          }\r\n          console.log(\"data\", data);\r\n        } catch (error) {\r\n          toast.error(\"An error occurred. Please try again.\", toastOptions);\r\n          console.log(\"error\", error);\r\n        }   \r\n      }\r\n    }\r\n  \r\n\r\n\r\n    const handleValidation = () => {\r\n      const {username, password} = values;\r\n\r\n      if(password===\"\"){\r\n        toast.error(\"Password is required\",toastOptions);\r\n        return false\r\n      }else if(username.length===\"\"){\r\n        toast.error(\"Username is required\",toastOptions);\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n    const handleChange = (event) => {\r\n        setValues({...values,[event.target.name]:event.target.value});\r\n        \r\n    }\r\n\r\n  return (\r\n  <>\r\n  <div className=\"mx-auto flex min-h-screen w-full items-center justify-center bg-gray-900 text-white\">\r\n    <div className=\"flex w-[30rem] flex-col space-y-10\">\r\n        <div className=\"text-center text-4xl font-medium\">Log In</div>\r\n        <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\r\n          <div className=\"w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Username\"\r\n            name=\"username\"\r\n            onChange={handleChange}\r\n            className=\"w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none\"\r\n            />\r\n          </div>\r\n          <div className=\"w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500\">\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            name=\"password\"\r\n            onChange={handleChange}\r\n            className=\"w-full border-none bg-transparent outline-none placeholder:italic focus:outline-none\"\r\n          />\r\n          </div>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"transform rounded-sm bg-indigo-600 py-2 font-bold duration-300 hover:bg-indigo-400\">LOG IN</button>\r\n        </form>\r\n    </div>\r\n</div>\r\n<ToastContainer />\r\n</>\r\n)\r\n}\r\n\r\n\r\n\r\nexport default Login\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}